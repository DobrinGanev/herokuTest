{"version":3,"sources":["apiCaller.spec.js"],"names":[],"mappings":";;;;;;;;AACA;;;kBAWwB,O;;AAZxB;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;AAGA,IAAM,UAAU,uBAAhB;;AAEe,SAAS,OAAT,CAAiB,QAAjB,EAAiD;AAAA,QAAtB,MAAsB,yDAAb,KAAa;AAAA,QAAN,IAAM;;AAC9D,mCAAM,4BAAN,EACK,IADL,CACU,UAAS,QAAT,EAAmB;AACrB,YAAI,SAAS,MAAT,IAAmB,GAAvB,EAA4B;AACxB,kBAAM,IAAI,KAAJ,CAAU,0BAAV,CAAN;AACH;AACD,eAAO,SAAS,IAAT,EAAP;AACH,KANL,EAMO,IANP,CAMY,UAAS,IAAT,EAAe;AACnB,gBAAQ,GAAR,CAAY,IAAZ;AACH,KARL;AASD;;AAED,mBAAK,wBAAL,EAA+B,aAAK;AAClC,QAAI,QAAQ;AACV,iBAAS;AADC,KAAZ;;AAIA,QAAI,MAAM,oBAAK,uBAAL,EACC,GADD,CACK,QADL,EAEC,KAFD,CAEO,GAFP,EAEW,KAFX,CAAV;;AAIU,YAAQ,MAAR,EAAgB,EAAhB,EACG,IADH,CACQ,UAAS,MAAT,EAAiB;AACxB,gBAAQ,GAAR,CAAY,MAAZ;AACA,KAHD;;AAKN,WAAO,eAAK,GAAL,CAAS,uCAAT,EAAkD,UAAS,IAAT,EAAe;AACtE,aAAK,EAAL,CAAQ,KAAR,EAAe,UAAS,IAAT,EAAe;AAAA;AAAA;;AAC9B,cAAE,SAAF,uBAAY,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAAmB,IAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACH,SAFG;AAGL,KAJU,CAAP;AAOL,CArBD;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"apiCaller.spec.js","sourcesContent":["import test from 'ava';\n// import callApi, { API_URL } from '../apiCaller';\nimport nock from 'nock';\nimport fetch from 'isomorphic-fetch';\nimport Config from '.././config';\nimport http from \"http\";\n\n// /src/util/__tests__/apiCaller.spec.js\n\n\nconst API_URL = 'http://localhost:8000';\n\nexport default function callApi(endpoint, method = 'get', body) {\n  fetch('http://localhost:8000/test')\n      .then(function(response) {\n          if (response.status >= 400) {\n              throw new Error(\"Bad response from server\");\n          }\n          return response.json();\n      }).then(function(data) {\n          console.log(data);\n      });\n}\n\ntest('method defaults to GET', t => {\n  var reply = {\n    message: \"hello world from server\"\n  }\n\n  var api = nock('http://localhost:8000')\n            .get(\"/test/\")\n            .reply(200,reply);\n\n            callApi('test', {\n            }).then(function(result) {\n             console.log(result)\n            });\n\n      return http.get(\"http://javascriptplayground.com/test/\", function(resp) {\n        resp.on(\"end\", function(data) {\n        t.deepEqual(reply, data);\n    });\n  });\n\n\n});\n\n// test('sends the body', t => {\n//   const body = { id: 5 };\n//   const reply = { foo: 'bar' };\n//   nock(API_URL)\n//     .post('/foo', body)\n//     .reply(200, reply);\n//   return callApi('foo', 'post', body).then(response => {\n//     t.deepEqual(response, reply);\n//   });\n// });\n//\n// test('returns the error', t => {\n//   const reply = { message: 'Errrrrrrrrr' };\n//   nock(API_URL)\n//     .get('/send_error')\n//     .reply(500, reply);\n//   return callApi('send_error').then(error => {\n//     t.deepEqual(error, reply);\n//   });\n// });\n"]}